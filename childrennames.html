<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>EAT Lunch</title>

    <!-- Bootstrap core CSS -->
    <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="eat.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  </head>

  <body>

    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="header-bar">
        <img src="assets/img/usda.png" width="50px" />
        <span>Free & Reduced Price School Meals Application</span>
        <div id="translator"><div id="google_translate_element"></div></div>
      </div>
    </nav>

    <div class="container animate fadeIn">

      <a id="defineChild" style='color: #333; text-decoration: none;' class="bottom" title="<span style='font-weight: bold; color: #aab2bd; '>THIS INCLUDES CHILDREN:</span><br/><span style='color:#37bc9b;' class='glyphicon glyphicon-ok' aria-hidden='true'></span> 18 or younger AND supported with the householdâ€™s income<br/><span style='color:#37bc9b;' class='glyphicon glyphicon-ok' aria-hidden='true'></span> in your care under foster arrangements<br/><span style='color:#37bc9b;' class='glyphicon glyphicon-ok' aria-hidden='true'></span> homeless, migrant, or runaway<br/><span style='color:#37bc9b;' class='glyphicon glyphicon-ok' aria-hidden='true'></span> attending high school or below, regardless of age" data-html="true" data-placement="bottom" data-toggle="tooltip" href="#">
        <h2 class="form-signin-heading center-text" id="desc-heading">tell us the foster children's names</h2>
        <h5 class="form-signin-heading center-text heading">who live in your household, even if they are not related to you</h5>
      </a>

      <form class="form-horizontal col-md-12" id="aboutChildrenForm" name="aboutChildrenForm" action="review.html">
        <div id="childrenInfo">

        </div>

        <div class="form-group">
          <a class="btn btn-lg btn-primary btn-back" href="javascript:history.back();">Back</a>
          <button type="submit" class="btn btn-lg btn-primary btn-proceed">Next</button>
        </div>
      </form>
    </div> <!-- /container -->


    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="assets/js/ie10-viewport-bug-workaround.js"></script>
    <script src="main.js"></script>
    <script type="text/javascript" src="assets/js/sisyphus.min.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places&dummy=.js"></script>

    <!-- Plugins -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>
      var deleteIncome = function(childId) {
        // Delete income
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormoption1_child_"+childId);
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormoption2_child_"+childId);
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormoption3_child_"+childId);
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormoption4_child_"+childId);
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormoption5_child_"+childId);

        // Delete income time frame
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormradioOption1_child_"+childId);
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormradioOption2_child_"+childId);
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormradioOption3_child_"+childId);
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormradioOption4_child_"+childId);
        localStorage.removeItem("aboutChildrenFormaboutChildrenFormradioOption5_child_"+childId);
      };

      var show = function(el) {
          console.log("showing ");
          console.log(el);
          $("#" + el).show("slow");

          // Get child id
          var vals = el.split("_");
          var x = +vals[1];

          // Make inputs required
          $(("#child_"+x+"_income_table input:text")).attr("required", true);
          $(("#child_"+x+"_income_table input:radio")).attr("required", true);
      };

      var hide = function(el) {
          console.log("hiding ");
          console.log(el);
          $("#" + el).hide("slow");

          // Delete the data stored locally
          var vals = el.split("_");
          var x = +vals[1];
          deleteIncome(x);

          // Delete data in this form
          $(("#child_"+x+"_income_table input:text")).val('');
          $(("#child_"+x+"_income_table input:radio")).attr('checked',false);

          // Make hidden inputs not required
          $(("#child_"+x+"_income_table input:text")).removeAttr("required");
          $(("#child_"+x+"_income_table input:radio")).removeAttr("required");
      };

      $( function() {

        $("#desc-heading").prepend(localStorage.getItem("signatureFormsignatureFormfirst") + ", ");
        $("#defineChild").tooltip();

        var numChildren = localStorage.getItem("howManyChildrenFormhowManyChildrenFormnumChildren");

        // Delete old localStorage items (in case we decreased the number of children)
        for(var x = +numChildren+1; x <= 15; x++) {
          // Delete name
          localStorage.removeItem("aboutChildrenFormaboutChildrenFormfirst_"+x);
          localStorage.removeItem("aboutChildrenFormaboutChildrenFormlast_"+x);
          localStorage.removeItem("aboutChildrenFormaboutChildrenFormmi_"+x);

          // Delete status
          localStorage.removeItem("aboutChildrenFormaboutChildrenFormis_foster_child_"+x);
          localStorage.removeItem("aboutChildrenFormaboutChildrenFormis_student_child_"+x);
          localStorage.removeItem("aboutChildrenFormaboutChildrenFormis_hmr_child_"+x);

          // Delete has income
          localStorage.removeItem("aboutChildrenFormaboutChildrenFormradioGroup_child_"+x);

          // Delete income
          deleteIncome(x);
        }

        // Add in a row for each child
        for(var i = 1; i <= numChildren; i++) {
          $("#childrenInfo").append(
            "<div id='child_" + i + "' class='child_name well'><div class='form-group col-md-12' style='margin: 0;'>" +
                "<div class='col-sm-3'>" +
                  "<label class='text_label' for='first_" + i + "'>first name</label>" +
                  "<input name='first_" + i + "' type='text' class='form-control' id='first_" + i + "' placeholder='' required='true'>" +
                "</div>" +

                "<div class='col-sm-1' style='width: 40px; padding: 0;'>" +
                  "<label class='text_label' for='mi_" + i + "'>MI</label>" +
                  "<input name='mi_" + i + "' type='text' class='form-control' id='mi_" + i + "' placeholder='' required='true'>" +
                "</div>" +

                "<div class='col-sm-3'>" +
                  "<label class='text_label' for='last_" + i + "'>last name</label>" +
                  "<input name='last_" + i + "' type='text' class='form-control' id='last_" + i + "' placeholder='' required='true'>" +
                "</div>" +
              "</div>" +
              "</div>" +
            "</div>"
          );
        }

        $("form").sisyphus({timeout: 1, autoRelease: false }); //Autosave form

      } );
    </script>
    <script type="text/javascript">
      function googleTranslateElementInit() {
        new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false}, 'google_translate_element');
      }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  </body>
</html>
